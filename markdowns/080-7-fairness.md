## 7. フェアネスを考慮したスクレイピング

AWSやGCPで特定のドメインに対して高頻度でアクセスを行うと攻撃とみなされ、通信がシャットダウンされたりします。  

また実際にアクセスが多すぎて、対象のサイトに対して過負荷を起こしていまうかもしれません。  

いくつかのロジックにて過負荷を防ぐ方法があるので、ご紹介するとともに、どういったロジックで作成したかを説明します。  

### 7.1 ランダムドメイン選択 

結局の所、攻撃とみなされる要素は特定のドメインに対して大量のリクエストを行うことで判定されるので、負荷を分散する必要があります。  

もっと簡単なロジックでは、すべてのドメインに対して平等なスクレイピングの機会を与える方法で、以下のような構造のファイルシステムがある場合に、まず階層1のSetからドメインを選択し、そのドメインのURLを一つ選択し、そのURLを消去します。この操作をすべてのSetが空になるまで繰り返し、空になったらスクレイピング終了です。（現実的な実世界のウェブページ数はものすごい数にのぼり、終了条件を満たせることはほぼありません）

<div align="center">
  <img width="500px" src="https://www.dropbox.com/s/f39me2llfwx40c8/2019-01-20-z1.png?raw=1">
  <div> 図1. ランダムドメイン選択 </div>
</div>

この手法はすべてのURLに対して平等な負荷をかけることになるので、現実的に誰かに迷惑をかけるということがありません。しかしながら、特定のどのdomainに注力をするということもしないので、無限に薄く広く広がることになります。(これを防ぐには日本語のドメインに限定するなどすると良いです)
   